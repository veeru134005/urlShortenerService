package com.apple.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.apple.Repo.UrlRepository;
import com.apple.binding.UrlDto;
import com.apple.entity.UrlEntity;
import com.apple.utils.UrlUtils;

@Service
public class UrlServiceImpl implements UrlService {

	@Autowired
	private UrlRepository repository;

	@Autowired
	private UrlUtils urlUtils;

	@Override
	public String generateShortUrl(UrlDto urlDto) {
		String shrtUrl = null;
		if (urlDto != null && !urlDto.getUrl().isEmpty()) {
			shrtUrl = urlUtils.generateShortUrl(urlDto.getUrl());
			UrlEntity urlEntity = new UrlEntity(urlDto.getUrl(), shrtUrl);
			repository.save(urlEntity);
		}
		return shrtUrl;
	}

}
